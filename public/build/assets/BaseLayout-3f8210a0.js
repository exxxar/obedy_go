import{q as se,x as F,e as M,O as ne,s as U,o as l,b as i,a as t,F as R,r as T,n as j,u as g,m as I,t as E,y as ue,z as xe,A as Ee,B as Ve,C as Oe,D as N,P as Re,E as Ie,G as Me,H as Se,_ as re,I as Pe,J as Ae,N as Te,Z as Ue,K as Le,T as Be,L as je,M as De,Q as ze,R as Ne,S as qe,U as Fe,V as Je,W as Q,j as H,i as Z,d as k,X as oe,Y as J,p as te,c as L,w as A,k as O,f as ce,g as q,$ as pe,l as ee,v as _e,a0 as be,h as We,a1 as ye,a2 as Qe,a3 as Xe,a4 as He}from"./app-201c5557.js";const me=se("main",()=>{const e=F([{partId:1,title:"Стандарт",image:"/images/logo_obed_go.jpg",slug:"standard"},{partId:2,title:"Экспресс",image:"/images/logo_obed_go.jpg",slug:"express"},{partId:3,title:"Премиум",image:"/images/logo_obed_go.jpg",slug:"premium"},{partId:4,title:"Собери сам",image:"/images/logo_obed_go.jpg",slug:"self"}]),s=M(0);function o(d=!0){if(s.value===0){s.value=1;return}d?s.value===4?s.value=1:s.value++:s.value===1?s.value=4:s.value--}function a(){if(s.value===0){ne.get(route("main"));return}let d=e.find(u=>u.partId===s.value).slug??"";if(d==="self"){ne.get(route("self"));return}ne.get(route("products",d))}return{foodParts:e,part:s,changePosition:o,selectPart:a}}),Ke={class:"container upper-menu fixed-top d-none d-md-block"},Ge={class:"row justify-content-between"},Ze={class:"col-6 col-md-3 px-3"},Ye=["onClick"],et=["src"],tt={__name:"TopMenu",setup(e){const{foodParts:s,part:o}=U(me());return(a,d)=>(l(),i("div",Ke,[t("div",Ge,[(l(!0),i(R,null,T(g(s),u=>(l(),i("div",Ze,[t("div",{class:j("item-tab "+(g(o)===u.partId?"active":"")),onClick:r=>o.value=u.partId},[t("h3",null,[t("img",{src:u.image,alt:""},null,8,et),I(E(u.title),1)])],10,Ye)]))),256))])]))}};ue.add(xe);ue.add(Ee);ue.add(Ve);Oe.watch();var fe;const st=((fe=window.document.getElementsByTagName("title")[0])==null?void 0:fe.innerText)||"Laravel",B=Fe,W=qe;window.axios=N;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";window.Pusher=Re;window.Echo=new Ie({broadcaster:"pusher",key:"37f1cfbd4bda023198c9",cluster:"eu",forceTLS:!0});const P=(e,s="success")=>{Je().notify({group:"info",type:s,title:"Оповещение ОбедыGO",text:e})},ot={preLoad:1.3,error:"/images/logo_obed_go.jpg",loading:"/images/logo_obed_go.jpg",attempt:1};Me({title:()=>`${st}`,resolve:e=>Se(`./Pages/${e}.vue`,Object.assign({"./Pages/Main.vue":()=>re(()=>import("./Main-f73d4d32.js"),["assets/Main-f73d4d32.js","assets/app-201c5557.js","assets/app-58eb6cfa.css"]),"./Pages/Products.vue":()=>re(()=>import("./Products-9dc82c97.js"),["assets/Products-9dc82c97.js","assets/app-201c5557.js","assets/app-58eb6cfa.css"]),"./Pages/Self.vue":()=>re(()=>import("./Self-f49194ef.js"),["assets/Self-f49194ef.js","assets/app-201c5557.js","assets/app-58eb6cfa.css"])})),setup({el:e,App:s,props:o,plugin:a}){return Pe({render:()=>Ae(s,o)}).use(Te,Ue).use(a).use(Le()).use(Be,ot).use(je).use(De).component("v-select",ze).mount(e)}}).then(()=>{Ne.init({color:"#4B5563"})});const X=se("userStore",()=>{const e=window.localStorage.getItem("user")===null?F({name:"",phone:"",addresses:[],isAuthorized:!1}):F(JSON.parse(window.localStorage.getItem("user"))),s=K();Q(e,n=>{localStorage.setItem("user",JSON.stringify(e))});async function o(){await N.post(route("register",e)).then(n=>{e.isAuthorized=!0,P("Вы успешно зарегистрировались!")}).catch(n=>{P("Произошла ошибка при регистрации","error")})}async function a(n){await N.post(route("login",n)).then(m=>(r(m.data),window.axios.defaults.headers.common["X-CSRF-TOKEN"]=m.data.token,P("Вы успешно вошли в аккаунт!"),Promise.resolve(m))).catch(m=>Promise.reject(m))}async function d(){await N.post(route("logout")).then(n=>{e.isAuthorized=!1,window.axios.defaults.headers.common["X-CSRF-TOKEN"]=n.data.token,P("Вы успешно вышли из аккаунта!")}).catch(n=>{e.isAuthorized=!1})}async function u(){await N.get(route("user")).then(n=>{n.data.user.user===null?e.isAuthorized=!1:r(n.data.user),window.axios.defaults.headers.common["X-CSRF-TOKEN"]=n.data.token})}function r(n){e.name=n.user.name,e.phone=n.user.phone,e.addresses=n.user.addresses,e.isAuthorized=!0,s.addToCartFromBD(n.cart)}async function h(){await N.post(route("resend.code"),{phone:e.phone}).then(n=>(P("Код отправлен на ваш номера телефона"),Promise.resolve(n))).catch(n=>{P("Произошла ошибка при отправке кода","error")})}function f(){return e}return{user:e,register:o,login:a,logout:d,getUser:u,sendCode:h,dataUser:f}}),K=se("cart",()=>{const e=window.localStorage.getItem("cart_items")===null?M([]):M(JSON.parse(window.localStorage.getItem("cart_items"))),s=H(b=>e.value.find(c=>c.product.id===b)??null),o=X(),a=H(()=>{if(e===null||e.value.length===0)return 0;let b=0;return e.value.forEach(c=>{b+=h(c)}),b}),d=H(()=>{if(e===null||e.value.length===0)return 0;let b=0;return e.value.forEach(c=>{b+=c.product.price*h(c)}),b}),u=H(()=>{if(e===null||e.value.length===0)return 0;let b=0;return e.value.forEach(c=>{c.product.weight>0&&(b+=c.product.weight*h(c)),c.product.weight===0&&c.product.positions.length>0&&c.product.positions.forEach(v=>{b+=v.weight})}),b});Q(a,b=>{localStorage.setItem("cart_items",JSON.stringify(e.value))});function r(b){let c=e.value.find(v=>v.product.id===b);return c?h(c):0}function h(b){return b.users.reduce((c,v)=>c+parseInt(v.quantity),0)}function f(b){let c=e.value.find(v=>v.product.id===b.id);if(c)c.users[m(b.product.id)].quantity++;else{let v=o.dataUser();e.value.push({product:b,users:[{name:v.name,phone:v.phone,quantity:1,date:new Date().toLocaleDateString(),inDBCart:v.isAuthorized}]}),c=e.value[e.value.length-1]}P("Товар добавлен в корзину!"),x(c,"add")}function n(b){console.log("addToCartFromBD");let c=o.dataUser();b.forEach(p=>{console.log(p);const _=e.value.find(C=>C.product.id===p.product.id);if(!_)e.value.push(p);else{let C=[];for(let S=0;S<p.users.length;S++)S===m(p.product.id)&&c.phone===p.users[S].phone?(_.users[S].inDBCart||(_.users[S].quantity+=p.users[S].quantity,x(_,"add")),_.users[S].inDBCart=!0):m(p.product.id)===-1&&!_.users[S].inDBCart?(_.users[0].name=c.name,_.users[0].phone=c.phone,_.users[0].inDBCart=!0,x(_,"addMore"),C.push(p.users[S])):S<_.users.length&&_.users[S].inDBCart||(C.push(p.users[S]),x(_,"add"));C.forEach(S=>{let G=_.users.find(Ce=>Ce.phone===S.phone);G?G.quantity+=S.quantity:_.users.push(S)})}});let v=[];e.value.forEach(p=>{b.find(_=>_.product.id===p.product.id)||(p.users[0].name=c.name,p.users[0].phone=c.phone,p.users[0].inDBCart=!0,v.push(p))}),v.length>0&&N.post(route("save.cart",{products:v}))}function m(b){let c=o.dataUser();return console.log(c),e.value.find(p=>p.product.id===b).users.findIndex(p=>p.phone===c.phone)}function $(b,c=m(b)){let v=e.value.find(p=>p.product.id===b);if(c===-1){let p=o.dataUser();v.users.push({name:p.name,phone:p.phone,quantity:1,date:new Date().toLocaleDateString(),inDBCart:p.isAuthorized})}else v.users[c].quantity++;P("Товар добавлен в корзину!"),x(v,"inc")}function w(b,c=m(b)){if(c===-1){B.getOrCreateInstance(document.getElementById("changeUserCart")).show();return}let v=e.value.find(p=>p.product.id===b);v.users[c].quantity>1?(v.users[c].quantity--,P("Лишний товар убран из корзины!"),x(v,"dec")):c===m(b)&&v.users[c].quantity<=1&&v.users.length>1?(v.users.splice(c,1),P("Лишний товар убран из корзины!"),x(v,"dec")):V(b,c)}function V(b,c=m(b)){if(c===-1){B.getOrCreateInstance(document.getElementById("changeUserCart")).show();return}let v=e.value.find(_=>_.product.id===b),p=e.value.indexOf(v);c===m(b)||v.users.length===1?(x(e.value[p],"delete"),e.value.splice(p,1)):(v.users.splice(c,1),x(e.value[p],"dec")),P("Лишний товар убран из корзины!")}async function y(){e.value=[],o.dataUser().isAuthorized&&await N.post(route("clear.cart")).catch(c=>{c.response.status===403&&o.getUser()})}async function x(b,c){o.dataUser().isAuthorized&&await N.post(route("change.cart",{product:b,action:c})).catch(p=>{p.response.status===403&&o.getUser()})}return{items:e,getProductById:s,getTotalCount:a,getTotalPrice:d,getTotalWeight:u,inCart:r,addToCart:f,incQuantity:$,decQuantity:w,removeProduct:V,clearCart:y,addToCartFromBD:n}}),at={class:"d-flex justify-content-center"},nt={class:"group-btn-counter gap-3"},rt=["name"],lt=t("span",null,[t("i",{class:"fas fa-trash"})],-1),dt=[lt],it=["name"],ut=["innerHTML"],ct=["name"],pt=t("span",null,"+",-1),mt=[pt],ht=["name","data-bs-content","disabled"],gt={class:"fw-bolder"},vt=["name","disabled"],de={__name:"ProductControls",props:{product:{type:Object,default:{}}},setup(e){const s=e,o=M(!1),a=M(new Date().getDay()),d=Z("inModal",!1),u=K(),{items:r}=U(u),h=Z("ready_to_order"),f=Z("is_cart_open"),n=V=>{let y=new Date;return y.setDate(y.getDate()+7-y.getDay()+V),y.getDate()+"."+(y.getMonth()+1)+"."+y.getFullYear()},m=()=>r.value.filter(y=>y.product.addition===0).length>0||s.product.addition===0,$=async V=>{[...document.getElementsByName("btn-popover-"+V)].forEach(y=>W.getOrCreateInstance(y).dispose()),await oe(),[...document.getElementsByName("btn-popover-"+V)].forEach(y=>W.getOrCreateInstance(y))},w=()=>{h.value=!0,f.value=!0};return(V,y)=>(l(),i("div",at,[g(u).inCart(e.product.id)>0?(l(),i("div",{key:0,class:"cnt-container",onMouseenter:y[4]||(y[4]=x=>o.value=!0),onMouseleave:y[5]||(y[5]=x=>o.value=!1)},[t("div",nt,[t("button",{class:"btn btn-danger btn-coutner me-3",name:"btn-popover-"+e.product.id,"data-bs-trigger":"hover","data-bs-toggle":"popover","data-bs-placement":"bottom","data-bs-content":"Убрать весь продукт из корзины",onClick:y[0]||(y[0]=x=>{g(u).removeProduct(e.product.id),$(e.product.id)})},dt,8,rt),t("button",{class:"btn btn-danger btn-coutner",name:"btn-popover-"+e.product.id,onClick:y[1]||(y[1]=x=>{g(u).decQuantity(e.product.id),$(e.product.id)}),"data-bs-trigger":"hover","data-bs-toggle":"popover","data-bs-placement":"bottom","data-bs-content":"Убрать порцию из корзины"}," - ",8,it)]),t("p",{innerHTML:g(u).inCart(e.product.id),class:j(g(d)?"text-dark":"text-white")},null,10,ut),t("button",{class:"btn btn-danger btn-coutner",name:"btn-popover-"+e.product.id,onClick:y[2]||(y[2]=x=>{g(u).incQuantity(e.product.id),$(e.product.id)}),"data-bs-trigger":"hover","data-bs-toggle":"popover","data-bs-placement":"bottom","data-bs-content":"Добавить еще порцию в корзину"},mt,8,ct),o.value?(l(),i("div",{key:0,class:"btn btn-success sub-btn z-1",onClick:y[3]||(y[3]=x=>w())},"Оформить")):k("",!0)],32)):k("",!0),!(a.value<e.product.day_index)&&g(u).inCart(e.product.id)===0?(l(),i("button",{key:1,class:"btn btn-danger w-100 text-uppercase mt-2 p-3",name:"btn-popover-"+e.product.id,"data-bs-trigger":"hover","data-bs-toggle":"popover","data-bs-placement":"bottom","data-bs-content":"Добавить товар в корзину - "+n(e.product.day_index),onClick:y[6]||(y[6]=x=>{g(u).addToCart(e.product),$(e.product.id)}),disabled:!m()},[I("В КОРЗИНУ "),t("span",gt,E(n(e.product.day_index)),1)],8,ht)):k("",!0),a.value<e.product.day_index&&g(u).inCart(e.product.id)===0?(l(),i("button",{key:2,class:"btn btn-success w-100 text-uppercase mt-2 p-3 custom-btn-color-success",name:"btn-popover-"+e.product.id,"data-bs-trigger":"hover","data-bs-toggle":"popover","data-bs-placement":"bottom","data-bs-content":"Добавить товар в корзину",onClick:y[7]||(y[7]=x=>{g(u).addToCart(e.product),$(e.product.id)}),disabled:!m()}," В КОРЗИНУ ",8,vt)):k("",!0)]))}},ft=["id","aria-labelledby"],_t={class:"modal-content"},bt={key:0,class:"modal-header"},yt=["id"],kt={class:"modal-body"},$t={key:2,class:"modal-footer"},wt=t("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal"},"Отменить",-1),Ct=t("button",{type:"button",class:"btn btn-success","data-bs-dismiss":"modal"},"Подтвердить",-1),xt=[wt,Ct],z={__name:"Modal",props:{id:{type:String,default:"modal"},title:{type:String,default:null},class_size:{type:String,default:null},header:{type:Boolean,default:!0},footer:{type:Boolean,default:!1},clearFunction:{type:Function,default:null}},setup(e){return(s,o)=>(l(),i("div",{class:"modal fade",id:e.id,tabindex:"-1","aria-labelledby":e.id+"Label","aria-hidden":"true"},[t("div",{class:j(["modal-dialog",e.class_size])},[t("div",_t,[e.header?(l(),i("div",bt,[J(s.$slots,"title",{},()=>[t("h5",{class:"modal-title",id:e.id+"Label"},E(e.title),9,yt)]),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:o[0]||(o[0]=a=>e.clearFunction())})])):k("",!0),e.header?k("",!0):J(s.$slots,"header",{key:1}),t("div",kt,[J(s.$slots,"body")]),e.footer?(l(),i("div",$t,xt)):k("",!0),e.footer?k("",!0):J(s.$slots,"footer",{key:3})])],2)],8,ft))}},Et={class:"badge bg-danger"},Vt={key:0,class:"row"},Ot={class:"col-md-7 col-sm-6"},Rt=["src"],It={class:"col-md-5 col-sm-6"},Mt={key:0},St={key:1},Pt={class:"d-flex mb-2 flex-wrap text-dark"},At={class:"badge bg-danger me-1"},Tt={key:2,class:"text-dark"},Ut={key:3,class:"text-dark"},Lt={key:1,class:"row"},Bt={key:0,class:"row p-2"},jt={class:"col-md-6 mt-2"},Dt={class:"row"},zt={class:"col-md-6"},Nt=["src"],qt={class:"col-md-6"},Ft={class:"badge bg-danger me-1"},Jt={class:"row w-100"},Wt={class:"col-md-4 d-flex justify-content-center align-items-center"},Qt={key:0,class:"text-dark"},Xt={class:"col-md-4 d-flex justify-content-center align-items-center"},Ht={key:0,class:"text-dark"},Kt={class:"col-md-4"},Gt={__name:"ProductModal",props:{product:{type:Object,default:{}}},setup(e){return te("inModal",!0),(s,o)=>(l(),L(z,{id:"modal-"+e.product.id,class_size:"modal-lg"},{title:A(()=>[t("h3",null,[t("span",Et,'"'+E(e.product.title)+'"',1)])]),body:A(()=>[e.product.is_week?k("",!0):(l(),i("div",Vt,[t("div",Ot,[t("img",{src:e.product.image,class:"img-fluid",alt:""},null,8,Rt)]),t("div",It,[e.product.description?(l(),i("p",Mt,E(e.product.description),1)):k("",!0),e.product.positions?(l(),i("ul",St,[(l(!0),i(R,null,T(e.product.positions,a=>(l(),i("li",Pt,[t("p",null,[t("span",At,E(a.weight)+" гр.",1),I(E(a.title),1)])]))),256))])):k("",!0),e.product.price?(l(),i("p",Tt,[I("Цена: "),t("strong",null,E(e.product.price)+" руб.",1)])):k("",!0),e.product.weight?(l(),i("p",Ut,[I("Масса: "),t("strong",null,E(e.product.weight)+" гр.",1)])):k("",!0),O(de,{product:e.product},null,8,["product"])])])),e.product.is_week?(l(),i("div",Lt,[e.product.positions?(l(),i("ul",Bt,[(l(!0),i(R,null,T(e.product.positions,a=>(l(),i("li",jt,[t("div",Dt,[t("div",zt,[t("img",{src:a.image,class:"img-fluid",alt:""},null,8,Nt)]),t("div",qt,[t("p",null,[t("span",Ft,E(a.weight)+" гр.",1),I(E(a.title),1)])])])]))),256))])):k("",!0),t("div",Jt,[t("div",Wt,[e.product.price?(l(),i("p",Qt,[I("Полная цена: "),t("strong",null,E(e.product.price)+" руб.",1)])):k("",!0)]),t("div",Xt,[e.product.weight?(l(),i("p",Ht,[I("Общая масса: "),t("strong",null,E(e.product.weight)+" гр.",1)])):k("",!0)]),t("div",Kt,[O(de,{product:e.product},null,8,["product"])])])])):k("",!0)]),_:1},8,["id"]))}},Zt=["alt","data-bs-target"],Yt={key:0,class:"week-label"},es={__name:"ProductCard",props:{product:{type:Object,default:{}},week:{type:Boolean,default:!1}},setup(e){const s=async o=>{[...document.getElementsByName("btn-popover-"+o)].forEach(a=>W.getOrCreateInstance(a).dispose()),await oe(),[...document.getElementsByName("btn-popover-"+o)].forEach(a=>W.getOrCreateInstance(a))};return(o,a)=>{const d=ce("lazy");return l(),i(R,null,[t("div",{class:j(["day-item",e.week?"week-product":""])},[t("h3",null,E(e.product.title),1),q(t("img",{alt:e.product.title,class:"w-100","data-bs-toggle":"modal","data-bs-target":"#modal-"+e.product.id,onClick:a[0]||(a[0]=u=>s(e.product.id))},null,8,Zt),[[d,e.product.image]]),O(de,{product:e.product},null,8,["product"]),e.product.is_week?(l(),i("div",Yt,"Бесплатная доставка")):k("",!0)],2),O(Gt,{product:e.product},null,8,["product"])],64)}}};/*! maska v2.1.9 | (c) Alexander Shabunevich | Released under the MIT license */var ts=Object.defineProperty,ss=(e,s,o)=>s in e?ts(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o,Y=(e,s,o)=>(ss(e,typeof s!="symbol"?s+"":s,o),o);const he={"#":{pattern:/[0-9]/},"@":{pattern:/[a-zA-Z]/},"*":{pattern:/[a-zA-Z0-9]/}};class ge{constructor(s={}){Y(this,"opts",{}),Y(this,"memo",new Map);const o={...s};if(o.tokens!=null){o.tokens=o.tokensReplace?{...o.tokens}:{...he,...o.tokens};for(const a of Object.values(o.tokens))typeof a.pattern=="string"&&(a.pattern=new RegExp(a.pattern))}else o.tokens=he;Array.isArray(o.mask)&&(o.mask.length>1?o.mask=[...o.mask].sort((a,d)=>a.length-d.length):o.mask=o.mask[0]??""),o.mask===""&&(o.mask=null),this.opts=o}masked(s){return this.process(s,this.findMask(s))}unmasked(s){return this.process(s,this.findMask(s),!1)}isEager(){return this.opts.eager===!0}isReversed(){return this.opts.reversed===!0}completed(s){const o=this.findMask(s);if(this.opts.mask==null||o==null)return!1;const a=this.process(s,o).length;return typeof this.opts.mask=="string"?a>=this.opts.mask.length:typeof this.opts.mask=="function"?a>=o.length:this.opts.mask.filter(d=>a>=d.length).length===this.opts.mask.length}findMask(s){const o=this.opts.mask;if(o==null)return null;if(typeof o=="string")return o;if(typeof o=="function")return o(s);const a=this.process(s,o.slice(-1).pop()??"",!1);return o.find(d=>this.process(s,d,!1).length>=a.length)??""}escapeMask(s){const o=[],a=[];return s.split("").forEach((d,u)=>{d==="!"&&s[u-1]!=="!"?a.push(u-a.length):o.push(d)}),{mask:o.join(""),escaped:a}}process(s,o,a=!0){var d;if(o==null)return s;const u=`value=${s},mask=${o},masked=${a?1:0}`;if(this.memo.has(u))return this.memo.get(u);const{mask:r,escaped:h}=this.escapeMask(o),f=[],n=this.opts.tokens!=null?this.opts.tokens:{},m=this.isReversed()?-1:1,$=this.isReversed()?"unshift":"push",w=this.isReversed()?0:r.length-1,V=this.isReversed()?()=>c>-1&&v>-1:()=>c<r.length&&v<s.length,y=p=>!this.isReversed()&&p<=w||this.isReversed()&&p>=w;let x,b=-1,c=this.isReversed()?r.length-1:0,v=this.isReversed()?s.length-1:0;for(;V();){const p=r.charAt(c),_=n[p],C=(_==null?void 0:_.transform)!=null?_.transform(s.charAt(v)):s.charAt(v);if(!h.includes(c)&&_!=null){if(C.match(_.pattern)!=null)f[$](C),_.repeated?(b===-1?b=c:c===w&&c!==b&&(c=b-m),w===b&&(c-=m)):_.multiple&&(c-=m),c+=m;else if(_.multiple){const S=((d=f[v-m])==null?void 0:d.match(_.pattern))!=null,G=r.charAt(c+m);S&&G!==""&&n[G]==null?(c+=m,v-=m):f[$]("")}else C===x?x=void 0:_.optional&&(c+=m,v-=m);v+=m}else a&&!this.isEager()&&f[$](p),C===p&&!this.isEager()?v+=m:x=p,this.isEager()||(c+=m);if(this.isEager())for(;y(c)&&(n[r.charAt(c)]==null||h.includes(c));)a?f[$](r.charAt(c)):r.charAt(c)===s.charAt(v)&&(v+=m),c+=m}return this.memo.set(u,f.join("")),this.memo.get(u)}}const ke=e=>JSON.parse(e.replaceAll("'",'"')),ve=(e,s={})=>{const o={...s};return e.dataset.maska!=null&&e.dataset.maska!==""&&(o.mask=os(e.dataset.maska)),e.dataset.maskaEager!=null&&(o.eager=le(e.dataset.maskaEager)),e.dataset.maskaReversed!=null&&(o.reversed=le(e.dataset.maskaReversed)),e.dataset.maskaTokensReplace!=null&&(o.tokensReplace=le(e.dataset.maskaTokensReplace)),e.dataset.maskaTokens!=null&&(o.tokens=as(e.dataset.maskaTokens)),o},le=e=>e!==""?!!JSON.parse(e):!0,os=e=>e.startsWith("[")&&e.endsWith("]")?ke(e):e,as=e=>{if(e.startsWith("{")&&e.endsWith("}"))return ke(e);const s={};return e.split("|").forEach(o=>{const a=o.split(":");s[a[0]]={pattern:new RegExp(a[1]),optional:a[2]==="optional",multiple:a[2]==="multiple",repeated:a[2]==="repeated"}}),s};class ns{constructor(s,o={}){Y(this,"items",new Map),Y(this,"beforeinputEvent",a=>{const d=a.target,u=this.items.get(d);u.isEager()&&"inputType"in a&&a.inputType.startsWith("delete")&&u.unmasked(d.value).length<=1&&this.setMaskedValue(d,"")}),Y(this,"inputEvent",a=>{if(a instanceof CustomEvent&&a.type==="input"&&a.detail!=null&&typeof a.detail=="object"&&"masked"in a.detail)return;const d=a.target,u=this.items.get(d),r=d.value,h=d.selectionStart,f=d.selectionEnd;let n=r;if(u.isEager()){const m=u.masked(r),$=u.unmasked(r);$===""&&"data"in a&&a.data!=null?n=a.data:$!==u.unmasked(m)&&(n=$)}if(this.setMaskedValue(d,n),"inputType"in a&&(a.inputType.startsWith("delete")||h!=null&&h<r.length))try{d.setSelectionRange(h,f)}catch{}}),this.options=o,typeof s=="string"?this.init(Array.from(document.querySelectorAll(s)),this.getMaskOpts(o)):this.init("length"in s?Array.from(s):[s],this.getMaskOpts(o))}destroy(){for(const s of this.items.keys())s.removeEventListener("input",this.inputEvent),s.removeEventListener("beforeinput",this.beforeinputEvent);this.items.clear()}needUpdateOptions(s,o){const a=this.items.get(s),d=new ge(ve(s,this.getMaskOpts(o)));return JSON.stringify(a.opts)!==JSON.stringify(d.opts)}needUpdateValue(s){const o=s.dataset.maskaValue;return o==null&&s.value!==""||o!=null&&o!==s.value}getMaskOpts(s){const{onMaska:o,preProcess:a,postProcess:d,...u}=s;return u}init(s,o){for(const a of s){const d=new ge(ve(a,o));this.items.set(a,d),a.value!==""&&this.setMaskedValue(a,a.value),a.addEventListener("input",this.inputEvent),a.addEventListener("beforeinput",this.beforeinputEvent)}}setMaskedValue(s,o){const a=this.items.get(s);this.options.preProcess!=null&&(o=this.options.preProcess(o));const d=a.masked(o),u=a.unmasked(a.isEager()?d:o),r=a.completed(o),h={masked:d,unmasked:u,completed:r};o=d,this.options.postProcess!=null&&(o=this.options.postProcess(o)),s.value=o,s.dataset.maskaValue=o,this.options.onMaska!=null&&(Array.isArray(this.options.onMaska)?this.options.onMaska.forEach(f=>f(h)):this.options.onMaska(h)),s.dispatchEvent(new CustomEvent("maska",{detail:h})),s.dispatchEvent(new CustomEvent("input",{detail:h}))}}const ie=new WeakMap,rs=e=>{setTimeout(()=>{var s;((s=ie.get(e))==null?void 0:s.needUpdateValue(e))===!0&&e.dispatchEvent(new CustomEvent("input"))})},ls=(e,s)=>{const o=e instanceof HTMLInputElement?e:e.querySelector("input"),a={...s.arg};if(o==null)return;rs(o);const d=ie.get(o);if(d!=null){if(!d.needUpdateOptions(o,a))return;d.destroy()}if(s.value!=null){const u=s.value,r=h=>{u.masked=h.masked,u.unmasked=h.unmasked,u.completed=h.completed};a.onMaska=a.onMaska==null?r:Array.isArray(a.onMaska)?[...a.onMaska,r]:[a.onMaska,r]}ie.set(o,new ns(o,a))},ds=["type","placeholder","value","data-maska"],is={class:"invalid-feedback"},D={__name:"TextInput",props:{modelValue:{type:String,required:!0},placeholder:{type:String,required:!0},type:{type:String,default:"text"},mask:{type:String,default:null},errors:{type:Array,default:[]},blur:{default:null}},emits:["update:modelValue"],setup(e){return(s,o)=>(l(),i(R,null,[q(t("input",{type:e.type,class:j(["form-control w-100 mt-2 mb-0 px-4 py-3",[e.errors.length>0?"is-invalid":"",e.errors.length===0&&e.modelValue!==""&&e.modelValue!==null?"is-valid":""]]),placeholder:e.placeholder,value:e.modelValue,"data-maska":e.mask,onInput:o[0]||(o[0]=a=>s.$emit("update:modelValue",a.target.value)),onBlur:o[1]||(o[1]=(...a)=>e.blur&&e.blur(...a))},null,42,ds),[[g(ls)]]),e.errors.length>0?(l(!0),i(R,{key:0},T(e.errors,a=>(l(),i("div",is,E(a),1))),256)):k("",!0)],64))}};const us=["onClick"],$e={__name:"AddressesSelect",props:{formAddress:{type:String,default:null},errors:{type:Array,required:!0},blur:{type:Function,default:()=>{}},clearMessage:{type:Function,default:()=>{}}},emits:["update:formAddress","option:selected","search:blur"],setup(e,{emit:s}){const o=e,{user:a}=U(X()),d=M(null),u=M(!0),r=M("");Q(d,()=>{s("update:formAddress",d.value)});const h=w=>{w!==null&&w!==""&&(d.value=w,o.clearMessage())},f=()=>{n(!0),o.blur()},n=(w=!1)=>{!a.value.addresses.some(V=>V===d.value)&&d.value!==null&&d.value!==""&&a.value.addresses.push(d.value),w&&s("option:selected",d.value)},m=async w=>{u.value=!1,d.value=null,a.value.addresses.splice(a.value.addresses.indexOf(w),1),r.value=w},$=w=>{w!==r.value?(d.value=w,u.value||document.getElementsByClassName("vs__search")[0].blur(),u.value=!0):(r.value="",d.value=null)};return(w,V)=>{const y=pe("v-select");return l(),L(y,{modelValue:d.value,"onUpdate:modelValue":V[0]||(V[0]=x=>d.value=x),options:g(a).addresses,taggable:"",onSearch:h,"onSearch:blur":f,onChange:n,closeOnSelect:u.value,"onOption:selected":$,placeholder:"Адрес доставки",class:j(["form-control",[e.errors.length>0?"is-invalid":"",e.errors.length===0&&d.value!==null?"is-valid":""]])},{option:A(({label:x})=>[g(a).addresses.indexOf(x)!==-1?(l(),i("button",{key:0,type:"button",class:"btn-close position-relative z-3","aria-label":"Close",onClick:b=>m(x)},null,8,us)):k("",!0),I(" "+E(x),1)]),_:1},8,["modelValue","options","closeOnSelect","class"])}}},cs=["onSubmit"],ps={key:0,class:"text-success mt-2"},ms={class:"invalid-feedback"},hs={class:"summary"},gs={key:0},vs=["disabled"],fs=t("p",{class:"end-info"},"После оформления заявки вам будет предложен для скачивания чек с подробным описанием заказа, его номером и промокодом для лотереи",-1),_s=t("div",{class:"row justify-content-center"},[t("p",null,"Хотите ли вы стать нашим клиентом?")],-1),bs={class:"modal-footer"},ys=t("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal"},"Нет",-1),ks=t("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal"},"Отмена",-1),$s={__name:"OrderForm",props:{modelValue:{type:String}},emits:["update:modelValue"],setup(e,{emit:s}){const o=K(),{items:a,getTotalPrice:d,getTotalWeight:u}=U(o),r=X(),{user:h}=U(r),f=M(!1),n=F({name:"",address:null,phone:"",message:"",delivery_price:null,delivery_range:null,total_weight:0,total_price:0,total_count:0,addresses:[],code:null,manager_phone:null}),m=M(!1),$=M(null),w=M([]),V=M(60);ee(()=>{n.name=h.value.name,n.phone=h.value.phone});const y=async()=>{await oe(),$.value="Мы ищем ваш Адрес, пожалуйста, ожидайте!",await axios.post(route("delivery.range"),{address:n.address}).then(p=>{$.value="Цена доставки к Вам "+p.data.price+" руб.",m.value=!0,n.delivery_price=p.data.price,n.delivery_range=p.data.range})},x=()=>{n.products=a.value,n.addresses=h.value.addresses,h.value.name=n.name,h.value.phone=n.phone,axios.post(route("order"),n,{responseType:"blob"}).then(p=>{B.getOrCreateInstance(document.getElementById("confirmOrder")).hide();let _=window.URL.createObjectURL(new Blob([p.data])),C=document.createElement("a");C.href=_,C.setAttribute("download","report.pdf"),document.body.appendChild(C),C.click(),P("Ваш заказ успешно отправлен! Ожидайте звонка оператора!"),a.value=[],f.value&&r.login({phone:n.phone,password:n.phone}),!h.value.isAuthorized&&!f.value&&B.getOrCreateInstance(document.getElementById("register")).show(),s("update:modelValue",!1),V.value=60}).catch(async p=>{if(p.response.status===422){const _=JSON.parse(await p.response.data.text());w.value=_.errors}p.response.status===406&&(f.value=!0,B.getOrCreateInstance(document.getElementById("confirmOrder")).show(),await c()),p.response.status===409&&(B.getOrCreateInstance(document.getElementById("confirmOrder")).hide(),a.value=[],f.value&&r.login({phone:n.phone,password:n.phone}),!h.value.isAuthorized&&!f.value&&B.getOrCreateInstance(document.getElementById("register")).show(),s("update:modelValue",!1),V.value=60,P("Ваш заказ успешно отправлен менеджеру!"))})},b=()=>{$.value=null},c=async()=>{await setTimeout(()=>{V.value!==0&&(V.value--,c())},1e3)},v=()=>{r.sendCode(),V.value=60};return(p,_)=>(l(),i(R,null,[t("form",{onSubmit:be(x,["prevent"]),class:"order-form w-100"},[t("button",{class:"hider",onClick:_[0]||(_[0]=C=>p.$emit("update:modelValue",!1))},"Скрыть"),O(D,{errors:w.value.hasOwnProperty("name")?w.value.name:[],placeholder:"Ваше имя",modelValue:n.name,"onUpdate:modelValue":_[1]||(_[1]=C=>n.name=C)},null,8,["errors","modelValue"]),O(D,{errors:w.value.hasOwnProperty("phone")?w.value.phone:[],placeholder:"Ваш номер телефона",modelValue:n.phone,"onUpdate:modelValue":_[2]||(_[2]=C=>n.phone=C),mask:"+7 (###) ###-##-##"},null,8,["errors","modelValue"]),$.value&&n.address!==null?(l(),i("p",ps,E($.value),1)):k("",!0),O($e,{formAddress:n.address,"onUpdate:formAddress":_[3]||(_[3]=C=>n.address=C),errors:w.value.hasOwnProperty("address")?w.value.address:[],blur:y,clearMessage:b},null,8,["formAddress","errors"]),"address"in w.value&&w.value.address.length>0?(l(!0),i(R,{key:1},T(w.value.address,C=>(l(),i("div",ms,E(C),1))),256)):k("",!0),O(D,{errors:w.value.hasOwnProperty("manager_phone")?w.value.manager_phone:[],placeholder:"Номер телефона менеджера",modelValue:n.manager_phone,"onUpdate:modelValue":_[4]||(_[4]=C=>n.manager_phone=C),mask:"+7 (###) ###-##-##"},null,8,["errors","modelValue"]),q(t("textarea",{class:j(["form-control mb-0 mt-2",[w.value.hasOwnProperty("message")&&w.value.message.length>0?"is-invalid":"",!w.value.hasOwnProperty("message")&&n.message!==""?"is-valid":""]]),placeholder:"Текстовое сообщение","onUpdate:modelValue":_[5]||(_[5]=C=>n.message=C)},null,2),[[_e,n.message]]),t("ul",hs,[t("li",null,[t("p",null,[I("Цена заказа: "),t("span",null,E(g(d))+" руб",1)])]),t("li",null,[t("p",null,[I("Масса заказа: "),t("span",null,E(g(u))+" гр",1)])]),n.delivery_price?(l(),i("li",gs,[t("p",null,[I("Примерная цена доставки: "),t("span",null,E(n.delivery_price)+" руб.",1)])])):k("",!0)]),t("button",{class:"btn btn-success w-100 p-3 text-uppercase font-weight-bold",disabled:!m.value&&n.manager_phone===null}," Отправить заявку ",8,vs),fs],40,cs),O(z,{id:"register",header:!1,footer:!1},{body:A(()=>[_s]),footer:A(()=>[t("div",bs,[ys,t("button",{type:"button",class:"btn btn-success",onClick:_[6]||(_[6]=(...C)=>g(r).register&&g(r).register(...C)),"data-bs-dismiss":"modal"},"Да ")])]),_:1}),O(z,{id:"confirmOrder",title:"Подтвердите Ваш заказ кодом из смс",footer:!1},{body:A(()=>[O(D,{errors:w.value.hasOwnProperty("code")?w.value.code:[],placeholder:"Введите код подтверждения",modelValue:n.code,"onUpdate:modelValue":_[7]||(_[7]=C=>n.code=C),mask:"####"},null,8,["errors","modelValue"]),t("button",{type:"button",class:j(["btn btn-link text-decoration-none",V.value!==0?"disabled":"text-success"]),onClick:_[8]||(_[8]=C=>V.value===0?v():null)},"Отправить код повторно"+E(V.value!==0?" через "+V.value:""),3)]),footer:A(()=>[t("div",{class:"modal-footer"},[ks,t("button",{type:"button",class:"btn btn-success",onClick:x},"Подтвердить")])]),_:1})],64))}},ws={class:"modal-header"},Cs=t("h5",{class:"modal-title"},"Отчет по пользователям",-1),xs=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Es={class:"table-responsive"},Vs={class:"table table-hover"},Os=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"Имя пользователя"),t("th",{scope:"col"},"Телефон пользователя"),t("th",{scope:"col"},"Количество порций"),t("th",{scope:"col"},"Дата добавления"),t("th",{scope:"col"},"Действия")])],-1),Rs={class:"d-flex gap-3"},Is={class:"group-btn-counter gap-1"},Ms=["onClick"],Ss=["onClick"],Ps=t("span",null,"+",-1),As=[Ps],we={__name:"UserCartModal",setup(e){const s=K(),{items:o}=U(s),a=me(),{foodParts:d}=U(a),u=async()=>{await axios.get(route("print.report"),{responseType:"blob"}).then(r=>{let h=window.URL.createObjectURL(new Blob([r.data])),f=document.createElement("a");f.href=h,f.setAttribute("download","report.pdf"),document.body.appendChild(f),f.click()}).catch(async r=>{r.response.status===403&&P("Для печати отчета необходима авторизация!","error")})};return(r,h)=>(l(),L(z,{id:"changeUserCart",header:!1,footer:!1,class_size:"modal-lg"},{header:A(()=>[t("div",ws,[J(r.$slots,"title",{},()=>[Cs]),t("button",{class:"btn btn-secondary btn-link",onClick:h[0]||(h[0]=f=>u())},"Распечатать"),xs])]),body:A(()=>[g(o).length>0?(l(!0),i(R,{key:0},T(g(o),f=>(l(),i(R,null,[t("p",null,[t("strong",null,E(g(d).find(n=>n.partId===f.product.partId).title),1),I(". "+E(f.product.title),1)]),t("div",Es,[t("table",Vs,[Os,t("tbody",null,[(l(!0),i(R,null,T(f.users,(n,m)=>(l(),i("tr",null,[t("td",null,E(n.name),1),t("td",null,E(n.phone),1),t("td",null,E(n.quantity),1),t("td",null,E(n.date),1),t("td",null,[t("div",Rs,[t("div",Is,[t("button",{class:"btn btn-danger btn-coutner",onClick:$=>g(s).decQuantity(f.product.id,m)}," - ",8,Ms),t("button",{class:"btn btn-danger btn-coutner",onClick:$=>g(s).incQuantity(f.product.id,m)},As,8,Ss)])])])]))),256))])])])],64))),256)):k("",!0)]),_:3}))}},Ts={class:"cart-modal"},Us={class:"cart-modal-inner"},Ls={key:0,class:"btn btn-link fs-2","data-bs-toggle":"modal","data-bs-target":"#changeUserCart"},Bs=t("i",{class:"far fa-circle-info text-danger"},null,-1),js=[Bs],Ds={class:"day-item-wrapper list-group-numbered"},zs={key:1},Ns=t("img",{src:"/images/logo_obed_go.jpg",class:"img-fluid",alt:""},null,-1),qs=t("h3",{class:"text-uppercase text-center"},"В корзине пусто...",-1),Fs=[Ns,qs],Js={key:0,class:"custom-modal-footer"},Ws=["disabled"],Qs={__name:"CartModal",setup(e){const s=K(),{items:o}=U(s),a=X(),{user:d}=U(a),u=F({suppressScrollX:!0,suppressScrollY:!1}),r=Z("ready_to_order"),h=Z("is_cart_open");te("inModal",!0);const f=()=>o.value.filter($=>$.product.addition===0).length>0,n=H(()=>o.value.find(m=>!!m.users.find(w=>w.phone!==d.value.phone))!==void 0);return(m,$)=>{const w=pe("perfect-scrollbar");return l(),i("div",Ts,[t("div",Us,[t("div",{class:j(["custom-modal-header",g(n)?"justify-content-between":""])},[g(n)?(l(),i("button",Ls,js)):k("",!0),t("button",{class:"btn btn-link",onClick:$[0]||($[0]=V=>h.value=!1)},"Закрыть")],2),O(w,{class:"scroll-area scroll-area-bottom ms-0 ps-0",options:u,tag:"ul"},{default:A(()=>[g(s).getTotalCount>0?(l(!0),i(R,{key:0},T(g(o),V=>(l(),i("li",Ds,[O(es,{product:V.product},null,8,["product"]),O(we,{productId:V.product.id},null,8,["productId"])]))),256)):k("",!0),g(s).getTotalCount===0?(l(),i("li",zs,Fs)):k("",!0)]),_:1},8,["options"]),g(s).getTotalCount>0?(l(),i("div",Js,[g(r)?k("",!0):(l(),i("button",{key:0,class:"btn btn-danger w-100 p-3 text-uppercase fw-bold",disabled:!f(),onClick:$[1]||($[1]=V=>r.value=!0)},[I("Оформить "),t("strong",null,E(g(s).getTotalPrice)+" руб",1)],8,Ws)),g(r)?k("",!0):(l(),i("button",{key:1,class:"btn btn-outline-danger mt-2 w-100 p-3 text-uppercase fw-bold",onClick:$[2]||($[2]=(...V)=>g(s).clearCart&&g(s).clearCart(...V))},"Очистить ")),g(r)?(l(),L($s,{key:2,modelValue:g(r),"onUpdate:modelValue":$[3]||($[3]=V=>We(r)?r.value=V:null)},null,8,["modelValue"])):k("",!0)])):k("",!0)]),t("div",{class:"cart-shadow",onClick:$[4]||($[4]=V=>h.value=!1)})])}}},ae=se("lottery",()=>{const e=M([]),s=M(null),o=M({});return{lotteries:e,lottery_id:s,lotteryItem:o,loadLotteries:async()=>{await axios.get(route("lotteries")).then(u=>{e.value=u.data})},loadLottery:async()=>{await axios.get(route("lottery",s.value)).then(u=>{o.value=u.data})}}}),Xs={class:"row d-flex justify-content-center"},Hs={class:"col-12"},Ks={class:"col-12"},Gs=t("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal"},"Отмена",-1),Zs={__name:"LoginModal",setup(e){const s=X(),o={phone:"",password:""},a=F({...o}),d=M([]),u=()=>{Object.assign(a,o),d.value=[]},r=()=>{s.login(a).then(h=>{B.getOrCreateInstance(document.getElementById("login")).hide(),u()},h=>{h.hasOwnProperty("response")&&(d.value=h.response.data.errors)})};return(h,f)=>(l(),L(z,{id:"login",title:"Войти в аккаунт",footer:!1,"clear-function":u},{body:A(()=>[t("div",Xs,[t("div",Hs,[O(D,{errors:d.value.hasOwnProperty("phone")?d.value.phone:[],placeholder:"Ваш номер телефона",modelValue:a.phone,"onUpdate:modelValue":f[0]||(f[0]=n=>a.phone=n),mask:"+7 (###) ###-##-##"},null,8,["errors","modelValue"])]),t("div",Ks,[O(D,{errors:d.value.hasOwnProperty("password")?d.value.password:[],placeholder:"Ваш пароль",modelValue:a.password,"onUpdate:modelValue":f[1]||(f[1]=n=>a.password=n),type:"password"},null,8,["errors","modelValue"])])])]),footer:A(()=>[t("div",{class:"modal-footer"},[Gs,t("button",{type:"button",class:"btn btn-success",onClick:r},"Да")])]),_:1}))}},Ys=t("img",{src:"/images/logo_obed_go.jpg",class:"img-fluid",alt:"О нас"},null,-1),eo=t("p",{class:"color--black text-justify"},'Обеды GO - это доставка вкуснейших обедов, приготовленных с любовью. Здесь каждый найдет для себя то, что ищет - домашние блюда, блюда "премиум", здоровая еда, стритфуд и многое другое. Вы можете выбрать для себя сформированное ежедневное комплексное меню или же собрать свой рацион по вкусу.',-1),to={__name:"AboutModal",setup(e){return(s,o)=>(l(),L(z,{id:"about",title:"О Нас"},{body:A(()=>[Ys,eo]),_:1}))}},so=t("ul",{class:"about-list"},[t("li",null,"Доставка осуществляется с 12:00 до 14:00 только в будние дни."),t("li",null,'Блюда из разделов "стандарт" и "премиум" заказываются ЗА ДЕНЬ. Предзаказ на понедельник также доступен и в выходные дни. '),t("li",null,'Блюда из раздела "экспресс" заказываются и доставляются день в день.'),t("li",null,"Дополнительные блюда заказываются за сутки!")],-1),oo={__name:"DeliveryModal",setup(e){return(s,o)=>(l(),L(z,{id:"delivery",title:"Условия доставки"},{body:A(()=>[so]),_:1}))}},ao={class:"row mt-2 mb-2 d-flex justify-content-center flex-wrap"},no={class:"col-md-6 col-lg-4 col-12"},ro={class:"lottery-slide mb-3"},lo={alt:""},io={class:"inf"},uo={class:"progress",style:{height:"30px"}},co=["onClick"],po={__name:"Lotteries",setup(e){const s=ae(),{lotteries:o,lottery_id:a}=U(s);return ee(()=>{s.loadLotteries()}),(d,u)=>{const r=ce("lazy");return l(),i("div",ao,[(l(!0),i(R,null,T(g(o),h=>(l(),i("div",no,[t("div",ro,[q(t("img",lo,null,512),[[r,h.image]]),t("p",io,[I("Мест: "),t("strong",null,E(h.place_count-h.free_place_count)+" / "+E(h.place_count),1)]),t("div",uo,[t("div",{class:"progress-bar progress-bar-striped progress-bar-animated bg-success",role:"progressbar",style:ye("width: "+(h.place_count-h.free_place_count)/h.place_count*100+"%")},null,4)]),t("button",{class:"btn btn-danger mt-2 w-100",onClick:f=>a.value=h.id},"Участвовать",8,co)])]))),256))])}}},mo={key:0,class:"row"},ho={class:"col-12"},go={class:"text-danger"},vo={key:0,class:"badge bg-success"},fo={key:1,class:"badge bg-danger"},_o={key:2},bo={key:3,class:"badge bg-danger"},yo={class:"progress",style:{height:"30px"}},ko={class:"col-sm-4 col-md-3 col-6 lottery-item-wrapper",role:"button"},$o=["onClick"],wo={key:0,alt:""},Co={key:1,alt:""},xo={key:1,class:"row"},Eo={class:"col-12 d-flex justify-content-center align-items-center"},Vo={class:"img-fluid",alt:""},Oo={class:"row d-flex justify-content-center"},Ro={class:"col-12"},Io=t("h4",{class:"col-12 mb-2 mt-2"},[I("Для получение "),t("span",{class:"text-danger fw-bolder"},"оповещения"),I(" о выигрыше Вам необходимо сообщить нам свой номер "),t("span",{class:"text-danger fw-bolder"},"телефона"),I(" и "),t("span",{class:"text-danger fw-bolder"},"электронную почту")],-1),Mo={class:"col-12"},So={class:"col-12"},Po={class:"col-12"},Ao={class:"col-12 col-sm-6"},To={class:"row justify-content-center"},Uo={__name:"LotteryGame",setup(e){const s=ae(),{lotteryItem:o,lottery_id:a}=U(s),d=X(),{user:u}=U(d),r=M(null),h=M([]),f={name:"",email:"",phone:"",code:"",lottery_id:a.value,selected_place:null},n=F({...f});ee(()=>{s.loadLottery(),Echo.channel(`lottery.${n.lottery_id}`).listen("ChangeLotteryEvent",()=>{s.loadLottery()}),m()});const m=()=>{Object.assign(n,f),Object.assign(n,{phone:u.value.phone,name:u.value.name}),h.value=[]},$=y=>{let x=o.value.occupied_places;return x.length===0?!1:x.find(b=>b===y)!=null},w=y=>{if($(y)){P("Данный слот уже кем-то занят! Попробуйте занять другой!","error");return}n.selected_place=y,B.getOrCreateInstance(document.getElementById("personal-info")).show()},V=()=>{axios.post(route("lottery.pick"),n).then(y=>{r.value=y.data.current_slot_count===0?null:y.data.current_slot_count,P("Спасибо! Слот успешно занят вами!"),B.getOrCreateInstance(document.getElementById("personal-info")).hide(),m(),r.value!==null&&B.getOrCreateInstance(document.getElementById("accept-lottery")).show()}).catch(y=>{y.response.data.errors&&y.response.data.errors.lottery_id?(P(y.response.data.errors.lottery_id[0],"error"),B.getOrCreateInstance(document.getElementById("personal-info")).hide(),o.value={}):y.response.data.errors&&y.response.data.errors.selected_place?(P(y.response.data.errors.selected_place[0],"error"),B.getOrCreateInstance(document.getElementById("personal-info")).hide(),s.loadLottery()):h.value=y.response.data.errors})};return(y,x)=>{const b=ce("lazy");return l(),i(R,null,[g(o)?(l(),i("div",mo,[t("div",ho,[t("h2",go,E(g(o).title),1),g(o).is_active?(l(),i("div",vo,"Лотерея активна (до "+E(g(o).date_end)+")",1)):(l(),i("div",fo,"Лотерея не активна")),r.value?(l(),i("p",_o,[I("Доступное число активаций "),t("strong",null,E(r.value),1)])):k("",!0),g(o).is_complete?(l(),i("div",bo,"Лотерея окончена")):k("",!0),t("p",null,E(g(o).description),1),t("div",yo,[t("div",{class:"progress-bar progress-bar-striped progress-bar-animated bg-success",role:"progressbar",style:ye("width: "+(g(o).place_count-g(o).free_place_count)/g(o).place_count*100+"%")},null,4)])]),(l(!0),i(R,null,T(g(o).place_count,c=>(l(),i("div",ko,[t("div",{class:"lottery-item",onClick:v=>w(c)},[$(c)?q((l(),i("img",Co,null,512)),[[b,"/images/logo_obed_go_occuped.jpg"]]):q((l(),i("img",wo,null,512)),[[b,"/images/logo_obed_go.jpg"]]),t("p",null,"#"+E(c),1)],8,$o)]))),256))])):(l(),i("div",xo,[t("div",Eo,[q(t("img",Vo,null,512),[[b,"/images/logo_obed_go.jpg"]])])])),O(z,{id:"personal-info",title:"Участие в розыгрыше","clear-function":m},{body:A(()=>[t("form",Oo,[t("div",Ro,[O(D,{errors:h.value.code,placeholder:"Промокод",modelValue:n.code,"onUpdate:modelValue":x[0]||(x[0]=c=>n.code=c)},null,8,["errors","modelValue"])]),Io,t("div",Mo,[O(D,{errors:h.value.name,placeholder:"Ваше имя",modelValue:n.name,"onUpdate:modelValue":x[1]||(x[1]=c=>n.name=c)},null,8,["errors","modelValue"])]),t("div",So,[O(D,{errors:h.value.phone,placeholder:"Ваш номер телефона",modelValue:n.phone,"onUpdate:modelValue":x[2]||(x[2]=c=>n.phone=c),mask:"+7 (###) ###-##-##"},null,8,["errors","modelValue"])]),t("div",Po,[O(D,{errors:h.value.email,placeholder:"Ваша почта",modelValue:n.email,"onUpdate:modelValue":x[3]||(x[3]=c=>n.email=c),type:"email"},null,8,["errors","modelValue"])]),t("div",Ao,[t("button",{type:"button",class:"btn btn-outline-success w-100 mt-3",onClick:x[4]||(x[4]=c=>V())},"Занять место")])])]),_:1}),O(z,{id:"accept-lottery",header:!1,footer:!0},{body:A(()=>[t("div",To,[t("p",null,[I("Доступное число активаций "),t("strong",null,E(r.value),1)])])]),_:1})],64)}}},Lo={__name:"LotteryModal",setup(e){const{lottery_id:s}=U(ae());return(o,a)=>(l(),L(z,{id:"lottery",class_size:"modal-lg",title:"Розыгрыши и призы"},{body:A(()=>[g(s)?(l(),L(Uo,{key:1})):(l(),L(po,{key:0}))]),_:1}))}},Bo=["id"],jo={key:0,class:"carousel-indicators"},Do=["data-bs-target","data-bs-slide-to","aria-current","aria-label"],zo={class:"carousel-inner"},No=["src"],qo=["data-bs-target"],Fo=t("span",{class:"carousel-control-prev-icon","aria-hidden":"true"},null,-1),Jo=t("span",{class:"visually-hidden"},"Previous",-1),Wo=[Fo,Jo],Qo=["data-bs-target"],Xo=t("span",{class:"carousel-control-next-icon","aria-hidden":"true"},null,-1),Ho=t("span",{class:"visually-hidden"},"Next",-1),Ko=[Xo,Ho],Go={__name:"Carousel",props:{id:{type:String,default:"carousel"},hasIndicators:{type:Boolean,default:!0},hasControls:{type:Boolean,default:!0},items:{type:Array,default:[]}},setup(e){return(s,o)=>(l(),i("div",{id:e.id,class:"carousel slide carousel-fade","data-bs-ride":"carousel"},[e.hasIndicators?(l(),i("div",jo,[(l(!0),i(R,null,T(e.items,(a,d)=>(l(),i("button",{type:"button","data-bs-target":"#"+e.id,"data-bs-slide-to":d,class:j(d===0?"active":""),"aria-current":d===0?"active":"","aria-label":a},null,10,Do))),256))])):k("",!0),t("div",zo,[(l(!0),i(R,null,T(e.items,(a,d)=>(l(),i("div",{class:j(["carousel-item",d===0?"active":""])},[t("img",{class:"d-block w-100",src:a,alt:""},null,8,No)],2))),256))]),e.hasControls?(l(),i(R,{key:1},[t("button",{class:"carousel-control-prev",type:"button","data-bs-target":"#"+e.id,"data-bs-slide":"prev"},Wo,8,qo),t("button",{class:"carousel-control-next",type:"button","data-bs-target":"#"+e.id,"data-bs-slide":"next"},Ko,8,Qo)],64)):k("",!0)],8,Bo))}},Zo={__name:"MenuModal",setup(e){return(s,o)=>(l(),L(z,{id:"menu",class_size:"modal-lg",header:!1},{body:A(()=>[O(Go,{id:"carousel-fade",items:["/images/full_1.jpg","/images/full_2.jpg"]},null,8,["items"])]),_:1}))}},Yo={data(){return{isSupported:!1,hasPermission:!1,isRecording:!1,isPaused:!1,chunks:[]}},methods:{async start(){if(!this.isRecording)try{this.$_stream=await this.getStream(),this.prepareRecorder(),this.$_mediaRecorder.start()}catch(e){this.$emit("error",e),console.error(e)}},stop(){this.isRecording&&(this.$_mediaRecorder.stop(),this.$_stream.getTracks().forEach(e=>e.stop()))},pause(){this.isRecording&&this.$_mediaRecorder.pause()},resume(){this.isPaused&&this.$_mediaRecorder.resume()},async getStream(){const e=await navigator.mediaDevices.getUserMedia(this.constraints);return this.$_stream=e,this.$emit("stream",e),e},prepareRecorder(){this.$_stream&&(this.$_mediaRecorder=new MediaRecorder(this.$_stream,{mimeType:this.mimeType}),this.$_mediaRecorder.ignoreMutedMedia=!0,this.$_mediaRecorder.addEventListener("start",()=>{this.isRecording=!0,this.isPaused=!1,this.$emit("start")}),this.$_mediaRecorder.addEventListener("resume",()=>{this.isRecording=!0,this.isPaused=!1,this.$emit("resume")}),this.$_mediaRecorder.addEventListener("pause",()=>{this.isPaused=!0,this.$emit("pause")}),this.$_mediaRecorder.addEventListener("dataavailable",e=>{e.data&&e.data.size>0&&this.chunks.push(e.data)},!0),this.$_mediaRecorder.addEventListener("stop",()=>{this.$emit("stop");const e=new Blob(this.chunks);e.size>0&&this.$emit("result",e),this.chunks=[],this.isPaused=!1,this.isRecording=!1},!0))}},mounted(){if(!navigator.mediaDevices&&!navigator.mediaDevices.getUserMedia){console.warn("Media Devices are not supported from your browser.");return}this.isSupported=!0}},ea=[Yo],ta={mixins:ea,props:{mode:{type:String,default:"hold",validator:e=>["hold","press"].includes(e)}},methods:{stopRecording(){if(this.mode!=="press")return this.stop()},startRecording(){return this.isRecording&&this.mode==="press"?this.stop():this.start()}}};const sa=(e,s)=>{const o=e.__vccOpts||e;for(const[a,d]of s)o[a]=d;return o},oa=["audio/aac","audio/ogg","audio/wav","audio/webm"],aa={name:"VueRecordAudio",mixins:[ta],props:{mimeType:{type:String,default:"audio/webm",validator:e=>oa.includes(e)}},data(){return{constraints:{audio:!0}}}},na=t("span",null,null,-1),ra=[na];function la(e,s,o,a,d,u){return e.isSupported?(l(),i("div",{key:0,class:j(["vue-audio-recorder",{active:e.isRecording,paused:e.isPaused}]),onMousedown:s[0]||(s[0]=(...r)=>e.startRecording&&e.startRecording(...r)),onMouseleave:s[1]||(s[1]=(...r)=>e.stopRecording&&e.stopRecording(...r)),onMouseup:s[2]||(s[2]=(...r)=>e.stopRecording&&e.stopRecording(...r)),onTouchstart:s[3]||(s[3]=(...r)=>e.startRecording&&e.startRecording(...r)),onTouchend:s[4]||(s[4]=(...r)=>e.stopRecording&&e.stopRecording(...r)),onTouchcancel:s[5]||(s[5]=(...r)=>e.stopRecording&&e.stopRecording(...r))},ra,34)):k("",!0)}const da=sa(aa,[["render",la]]),ia=t("h6",{class:"text-center"},[I("Запиши голосовое сообщение"),t("br"),t("strong",{class:"text-danger"},"Удерживай кнопку для записи!")],-1),ua={class:"d-flex justify-content-center mt-2"},ca={key:0,class:"row d-flex justify-content-center mt-2"},pa={class:"col-12"},ma={class:"recorded-audio"},ha={class:"audio-container"},ga=["src"],va=["onClick"],fa=t("i",{class:"fas fa-trash"},null,-1),_a=[fa],ba={__name:"AudioCallback",props:{modelValue:{type:Array,default:[],required:!0}},emits:["update:modelValue"],setup(e,{emit:s}){const o=e,a=M([]);Q(a.value,r=>{s("update:modelValue",r)}),Q(()=>o.modelValue,(r,h)=>{r.length===0&&a.value.length!==0&&(a.value=[],s("update:modelValue",a.value))});const d=r=>{a.value.push({src:window.URL.createObjectURL(r),data:r})},u=r=>{a.value.splice(r,1)};return(r,h)=>(l(),i("div",null,[ia,t("div",ua,[O(da,{mode:"hold",onResult:d})]),e.modelValue.length>0?(l(),i("div",ca,[t("div",pa,[t("div",ma,[(l(!0),i(R,null,T(e.modelValue,(f,n)=>(l(),i("div",{key:n,class:"recorded-item"},[t("div",ha,[t("audio",{src:f.src,controls:""},null,8,ga)]),t("div",null,[t("a",{onClick:m=>u(n),class:"button is-dark"},_a,8,va)])]))),128))])])])):k("",!0)]))}},ya={class:"card mb-3 obedy-callback-card"},ka=["onSubmit"],$a={class:"card-title"},wa={class:"form-group mb-3"},Ca={class:"form-group mb-3"},xa={class:"form-group mb-3"},Ea=["value","selected"],Va={key:0,class:"form-group mb-3"},Oa={class:"invalid-feedback"},Ra={class:"form-group mb-3"},Ia={class:"invalid-feedback"},Ma={class:"form-group mb-3"},Sa=Xe('<div class="form-group"><button class="btn btn-danger w-100 p-3 text-uppercase font-weight-bold mr-1 mb-1 w-100"><i class="icon ion-md-mail"></i> Отправить </button></div><div class="form-group mb-2 d-flex justify-content-center"><a data-bs-toggle="modal" data-bs-target="#delivery" class="btn btn-link mr-1 mb-1" title="Подробности о доставке" aria-label="Подробности о доставке"><i class="icon ion-ios-filing"></i> Подробности о доставке! </a></div>',2),Pa={__name:"CallbackForm",props:{selectedType:{type:Number,default:0}},setup(e){const s=e;ee(()=>{r.typeValue=s.selectedType});const o=["Оформление заказа","Проблемы с заказом","Стать партнером","Стать доставщиком","Реклама и продвижение","Другие вопросы"],a=["Оформить заказ голосом","Опиши свои проблемы","Давай совместно работать","Давай совместно работать","Давай совместно работать","Что-то другое..."],d={name:"",phone:"",address:"",recordings:[],message:"",typeValue:0},u=M([]),r=F({...d}),h=()=>{let f=new FormData;f.append("phone",r.phone),f.append("name",r.name),f.append("address",r.address),f.append("message",r.message),f.append("typeValue",r.typeValue);for(let n=0;n<r.recordings.length;n++){let m=r.recordings[n].data;console.log(m),f.append("files["+n+"]",m)}axios.post(route("callback"),f,{headers:{"Content-Type":"multipart/form-data"}}).then(function(){P("Ваше сообщение успешно отправлено!"),Object.assign(r,d),u.value=[]}).catch(async n=>{n.response.status===422&&(u.value=n.response.data.errors)})};return(f,n)=>(l(),i("div",ya,[t("form",{onSubmit:be(h,["prevent"]),class:"card-body"},[t("h5",$a,E(a[r.typeValue]),1),t("div",wa,[O(D,{errors:u.value.hasOwnProperty("name")?u.value.name:[],placeholder:"Ваше Ф.И.О",modelValue:r.name,"onUpdate:modelValue":n[0]||(n[0]=m=>r.name=m)},null,8,["errors","modelValue"])]),t("div",Ca,[O(D,{errors:u.value.hasOwnProperty("phone")?u.value.phone:[],placeholder:"Номер телефона",modelValue:r.phone,"onUpdate:modelValue":n[1]||(n[1]=m=>r.phone=m),mask:"+7 (###) ###-##-##"},null,8,["errors","modelValue"])]),t("div",xa,[q(t("select",{name:"question-type","onUpdate:modelValue":n[2]||(n[2]=m=>r.typeValue=m),class:"form-select px-4 py-3",required:""},[(l(),i(R,null,T(o,(m,$)=>t("option",{value:$,selected:r.typeValue===$?"selected":""},E(m),9,Ea)),64))],512),[[Qe,r.typeValue]])]),r.typeValue===0?(l(),i("div",Va,[O($e,{formAddress:r.address,"onUpdate:formAddress":n[3]||(n[3]=m=>r.address=m),errors:u.value.hasOwnProperty("address")?u.value.address:[]},null,8,["formAddress","errors"]),"address"in u.value&&u.value.address.length>0?(l(!0),i(R,{key:0},T(u.value.address,m=>(l(),i("div",Oa,E(m),1))),256)):k("",!0)])):k("",!0),t("div",Ra,[q(t("textarea",{name:"message","onUpdate:modelValue":n[4]||(n[4]=m=>r.message=m),class:j(["form-control",[u.value.hasOwnProperty("message")&&u.value.message.length>0?"is-invalid":"",(!u.value.hasOwnProperty("message")||u.value.message.length===0)&&r.message.length>0?"is-valid":""]]),placeholder:"Текст сообщения"},`
                    `,2),[[_e,r.message]]),u.value.hasOwnProperty("message")&&u.value.message.length>0?(l(!0),i(R,{key:0},T(u.value.message,m=>(l(),i("div",Ia,E(m),1))),256)):k("",!0)]),t("div",Ma,[O(ba,{modelValue:r.recordings,"onUpdate:modelValue":n[5]||(n[5]=m=>r.recordings=m)},null,8,["modelValue"])]),Sa],40,ka)]))}},Aa={class:"row"},Ta={class:"col-12"},Ua={__name:"CallbackModal",setup(e){return(s,o)=>(l(),L(z,{id:"callback",title:"Обратная связь"},{body:A(()=>[t("div",Aa,[t("div",Ta,[O(Pa,{"selected-type":1})])])]),_:1}))}},La={class:"wrapper obedygo"},Ba={class:"container-fluid d-flex align-items-center flex-wrap",style:{"min-height":"100vh",padding:"70px 10px 70px 10px"}},ja=t("h6",{class:"col-8 px-3"},[I("Полное меню на неделю можно глянуть "),t("a",{href:"#",class:"text-danger font-weight-bold","data-bs-toggle":"modal","data-bs-target":"#menu"},"ТУТ")],-1),Da={key:0,class:"mt-2"},za={key:2,class:"w-100"},Na={key:3,class:"w-100"},qa={key:6,class:"cart-container d-sm-block d-none"},Fa={key:0,class:"cart-icon login","data-bs-toggle":"modal","data-bs-target":"#login"},Ja={key:0},Wa=t("div",{class:"cart-icon about","data-bs-toggle":"modal","data-bs-target":"#about"},"О нас",-1),Qa=t("div",{class:"cart-icon callback","data-bs-toggle":"modal","data-bs-target":"#callback"},"Напиши нам",-1),Xa=t("div",{class:"cart-icon delivery","data-bs-toggle":"modal","data-bs-target":"#delivery"},"Доставка",-1),Ha={key:0,class:"badge badge-danger"},Ka={class:"bottom_menu"},Ga=["onClick"],Za=t("li",{class:"hr"},null,-1),Ya={key:0,class:"badge badge-danger"},en=t("li",{"data-bs-toggle":"modal","data-bs-target":"#about"},"О нас",-1),tn=t("li",{"data-bs-toggle":"modal","data-bs-target":"#callback"},"Напиши нам",-1),sn=t("li",{"data-bs-toggle":"modal","data-bs-target":"#delivery"},"Доставка",-1),an={__name:"BaseLayout",setup(e){const s=me(),o=K(),{foodParts:a,part:d}=U(s),{items:u,getTotalCount:r}=U(o),{lottery_id:h,lotteries:f}=U(ae()),n=X(),{user:m}=U(n),$=M(!1),w=M(!1),V=M(!1);te("ready_to_order",V),te("is_cart_open",w),Q(d,()=>{s.selectPart()}),ee(()=>{[...document.querySelectorAll('[data-bs-toggle="popover"]')].forEach(v=>W.getOrCreateInstance(v)),y(),window.addEventListener("keyup",x),console.log("base mount"),n.getUser()}),He(()=>{window.removeEventListener("keyup",x)});const y=()=>{if(route().current("products")&&d.value===0)switch(route().params.foodPart){case"standard":d.value=1;break;case"express":d.value=2;break;case"premium":d.value=3;break;case"self":d.value=4;break}},x=v=>{switch(v.keyCode){case 27:d.value=0;break;case 37:s.changePosition(!1);break;case 39:s.changePosition();break}},b=async()=>{for(const v of u.value)[...document.getElementsByName("btn-popover-"+v.product.id)].forEach(p=>W.getOrCreateInstance(p).dispose()),await oe(),[...document.getElementsByName("btn-popover-"+v.product.id)].forEach(p=>W.getOrCreateInstance(p))},c=H(()=>u.value.find(v=>!!v.users.find(_=>_.phone!==m.value.phone))!==void 0);return Q(c,v=>{v||B.getOrCreateInstance(document.getElementById("changeUserCart")).hide()}),(v,p)=>{const _=pe("notifications");return l(),i("div",La,[O(_,{position:"top left",group:"info"}),t("div",Ba,[g(d)===0?J(v.$slots,"content",{key:0}):(l(),L(tt,{key:1})),t("div",{class:j(["w-100 d-flex flex-column align-items-center text-uppercase text-white text-center mt-4",g(d)===0?"mb-5 mt-5":""])},[ja,(l(!0),i(R,null,T(g(a),C=>(l(),i(R,null,[g(d)===C.partId?(l(),i("h1",Da,E(C.title),1)):k("",!0)],64))),256))],2),g(d)===0?(l(),i("div",za)):k("",!0),g(d)===0?(l(),i("div",Na)):k("",!0),g(d)>0?J(v.$slots,"content",{key:4}):k("",!0),w.value?(l(),L(Qs,{key:5})):k("",!0),w.value?k("",!0):(l(),i("div",qa,[g(m).isAuthorized?(l(),i("div",{key:1,class:"cart-icon login",onClick:p[0]||(p[0]=C=>g(n).logout())},"Выйти")):(l(),i("div",Fa," Войти ")),t("div",{class:"cart-icon cart",onClick:p[1]||(p[1]=C=>{w.value=!0,b()})},[I("Корзина "),g(r)>0?(l(),i("span",Ja,E(g(r)),1)):k("",!0)]),Wa,Qa,Xa,g(f).length>0?(l(),i("div",{key:2,class:"cart-icon lottery","data-bs-toggle":"modal","data-bs-target":"#lottery",onClick:p[2]||(p[2]=C=>h.value=null)},"Акции ")):k("",!0)])),t("ul",{class:"footer-container d-sm-none",onMouseleave:p[7]||(p[7]=C=>$.value=!1)},[$.value?(l(),i(R,{key:1},[t("li",{class:"p-2 text-center",onClick:p[4]||(p[4]=C=>$.value=!1)},"Скрыть меню"),t("ul",Ka,[(l(!0),i(R,null,T(g(a),C=>(l(),i("li",{onClick:S=>d.value=C.partId},E(C.title),9,Ga))),256)),Za,t("li",{onClick:p[5]||(p[5]=C=>w.value=!0)},[I(" Корзина "),v.countInCart>0?(l(),i("span",Ya,E(v.countInCart),1)):k("",!0)]),en,tn,sn,g(f).length>0?(l(),i("li",{key:0,"data-bs-toggle":"modal","data-bs-target":"#lottery",onClick:p[6]||(p[6]=C=>h.value=null)},"Акции ")):k("",!0)])],64)):(l(),i("li",{key:0,class:"p-2 text-center",onClick:p[3]||(p[3]=C=>$.value=!0)},[I("Показать меню "),g(r)>0?(l(),i("span",Ha,E(g(r)),1)):k("",!0)]))],32),O(to),O(oo),O(Ua),O(Lo),O(Zo),O(Zs),g(m).isAuthorized&&g(c)?(l(),L(we,{key:7})):k("",!0),t("div",{class:"to-left",onClick:p[8]||(p[8]=C=>g(s).changePosition(!1))}),t("div",{class:"to-right",onClick:p[9]||(p[9]=C=>g(s).changePosition())})])])}}};export{an as _,es as a,Pa as b,me as u};
