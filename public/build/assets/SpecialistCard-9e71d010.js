import{i as g,o as l,d as n,a,t as r,n as c,p as u,q as p,z as m,N as I,P as b,x as f}from"./app-7b2c3ffe.js";const M=["src"],v={class:"card-body d-flex flex-column justify-content-between"},k={class:"d-flex flex-column"},C={class:"card-title text-truncate"},E={__name:"SpecialistCard",props:{specialist:{type:Object,default:{}},inModal:{type:Boolean,default:!1},specialistId:{type:Number,default:null}},emits:["update:specialistId"],setup(t,{emit:i}){const d=t;g(()=>{d.specialistId!==null&&document.getElementById("specialistModal").addEventListener("hidden.bs.modal",s=>{i("update:specialistId",null)},{once:!0})});const x=async s=>{i("update:specialistId",s),await p(()=>{let e=document.getElementById("specialistModal");m.getOrCreateInstance(e).show(),e.addEventListener("hidden.bs.modal",o=>{i("update:specialistId",null)},{once:!0})})},h=async s=>{await I.get(route("create.chat",s)).then(e=>{y(),b.get(route("chats"),{chatId:e.data.chatId})}).catch(e=>{e.response.status===401&&f("Для начала общения Вам необходимо войти в свой аккаунт","error"),e.response.status===404&&f("Выбранный специалист недоступен для общения","error")})},y=async()=>{await p(()=>{d.inModal&&m.getOrCreateInstance(document.getElementById("specialistModal")).hide()})};return(s,e)=>(l(),n("div",{class:c(["card text-center",t.inModal?"border-0":"fixed-height-500px m-5px"])},[a("img",{src:t.specialist.image,class:"card-img-top fixed-height-250px object-fit-cover",alt:"..."},null,8,M),a("div",v,[a("div",k,[a("h5",C,r(t.specialist.name),1),a("p",{class:c(["card-text",t.inModal?"":"cropped-text"])},r(t.specialist.description),3),t.inModal?u("",!0):(l(),n("p",{key:0,class:"link-primary cursor-pointer m-auto",onClick:e[0]||(e[0]=o=>x(t.specialist.id))},"подробнее"))]),t.specialist.isCurrentUser?u("",!0):(l(),n("button",{key:0,class:c(["btn btn-lg btn-danger",t.inModal?"mt-3":""]),onClick:e[1]||(e[1]=o=>h(t.specialist.id))},"Написать ",2))])],2))}};export{E as _};
