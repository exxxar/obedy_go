import{i as v,o as a,d as i,a as c,t as o,q as n,m as I,P as m,n as p,x as f,A as y,N as M,y as b}from"./app-0044d8d2.js";const h={class:"ratio ratio-1x1"},k=["src"],C={key:0,class:"card-title m-0"},w={key:1,class:"card-title m-0 text-truncate"},B={key:2,class:"card-text"},N={__name:"SpecialistCard",props:{specialist:{type:Object,default:{}},inModal:{type:Boolean,default:!1},specialistId:{type:Number,default:null}},emits:["update:specialistId"],setup(t,{emit:d}){const r=t;v(()=>{r.specialistId!==null&&document.getElementById("specialistModal").addEventListener("hidden.bs.modal",s=>{d("update:specialistId",null)},{once:!0})});const u=async s=>{d("update:specialistId",s),await f(()=>{let e=document.getElementById("specialistModal");y.getOrCreateInstance(e).show(),e.addEventListener("hidden.bs.modal",l=>{d("update:specialistId",null)},{once:!0})})},g=async s=>{await M.get(route("create.chat",s)).then(e=>{x(),m.get(route("chats"),{chatId:e.data.chatId})}).catch(e=>{e.response.status===401&&b("Для начала общения Вам необходимо войти в свой аккаунт","error"),e.response.status===404&&b("Выбранный специалист недоступен для общения","error")})},x=async()=>{await f(()=>{r.inModal&&y.getOrCreateInstance(document.getElementById("specialistModal")).hide()})};return(s,e)=>(a(),i("div",{class:p(["card text-center border-0",t.inModal?"":"p-5px bg-transparent text-white"])},[c("div",h,[c("img",{src:t.specialist.image,class:"object-fit-cover",alt:"...",onClick:e[0]||(e[0]=l=>u(t.specialist.id))},null,8,k)]),c("div",{class:p(["card-body d-flex flex-column justify-content-between",t.inModal?"gap-3":"p-0"])},[c("div",{class:"d-flex flex-column gap-2",onClick:e[1]||(e[1]=l=>u(t.specialist.id))},[t.inModal?(a(),i("h5",C,o(t.specialist.name),1)):n("",!0),t.inModal?n("",!0):(a(),i("h2",w,o(t.specialist.name),1)),t.inModal?(a(),i("p",B,o(t.specialist.description),1)):n("",!0)]),t.specialist.isCurrentUser?n("",!0):(a(),i("button",{key:0,class:"btn w-100 text-uppercase mt-2 p-3 btn-danger custom-btn-color-danger",onClick:e[2]||(e[2]=l=>g(t.specialist.id))},"Написать ")),t.specialist.isCurrentUser?(a(),i("button",{key:1,class:"btn w-100 text-uppercase mt-2 p-3 btn-success custom-btn-color-success",onClick:e[3]||(e[3]=l=>I(m).get(s.route("profile")))},"Профиль ")):n("",!0)],2)],2))}};export{N as _};
